<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprMenuIcon</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dialog = -1
n = 0;
fname = ""

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Menu de Actions de Dialogo

texts = ds_list_create();
texts[| 0] = "Crear Dialogo (Izq/Abj)"
texts[| 1] = "Crear Dialogo (Der/Arr)"
texts[| 2] = "Crear Dialogo (Izq/Arr)"
texts[| 3] = "Crear Dialogo (Der/Abj)"
texts[| 4] = "Crear Punto de Espera"
texts[| 5] = "Hacer esperar un Dialogo"
texts[| 6] = "Cambiar Texto del Dialogo"
texts[| 7] = "Crear Imagen"
texts[| 8] = "Quitar Dialogo"
texts[| 9] = "Quitar Imagen"
texts[| 10] = "Terminar Dialogo"
texts[| 11] = "Ejecutar Script"
texts[| 12] = "Cancelar"

scrs = ds_list_create();
scrs[| 0] = dem_crear_izq
scrs[| 1] = dem_crear_der
scrs[| 2] = dem_crear_izq_up
scrs[| 3] = dem_crear_der_down
scrs[| 4] = dem_set_waiter
scrs[| 5] = dem_dialog_wait
scrs[| 6] = dem_text_set
scrs[| 7] = MenuVertical_Nada
scrs[| 8] = dem_quitar_dialog
scrs[| 9] = MenuVertical_Nada
scrs[| 10] = dem_end_dialogs
scrs[| 11] = dem_script_exe
scrs[| 12] = MenuVertical_Nada

MenuVertical_crear(x,y+36,id,"Acciones",texts,scrs)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GUARDAR
fname = get_save_filename_ext("Dialog Guion File|*.gdlg","","","Guardar un Archivo de Guion Dialogo")


if (fname == "") exit;

var json = json_encode(dim_editor_mapx())

var file = file_text_open_write(fname);

file_text_write_string(file, json)

file_text_close(file)

show_message("Archivo Guardado en "+fname)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self()
draw_set_halign(fa_left)
draw_set_valign(fa_top)
draw_set_color(c_black)
draw_set_font(fontDefault)
draw_text(x,y+36,"Dialog Editor
ESCAPE --&gt; Detener Prueba de Dialogo
F3 --&gt; Probar Dialogo
F4 --&gt; GUARDAR COMO...
F5 --&gt; Guardar Dialogo Completo
F6 --&gt; Cargar Dialogo Completo
F7 --&gt; Limpiar Todo")

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="118">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// para eliminar todo
 var question = show_question ("Perdera todo lo que no haya guardado. Desea eliminar todo?"); 
 if question == false exit;
with (objDialogAction) instance_destroy () 
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="117">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// CARGAR

if (fname != "") {

    var question = show_question("Hay un archivo abierto, perdera lo que no haya guardado, Â¿continuar?");
    if (question == false) exit;
    fname = "";
    with(objDialogInfo) dialog = noone;
    with(objDialogAction) instance_destroy()
}

fname = get_open_filename_ext("Dialog Guion File|*.gdlg","","","Abrir archivo de Guion Dialogo");

if (fname == "") exit;


var file = file_text_open_read(fname);

var json = file_text_read_string(file);

file_text_close(file)
/*
dialog = json_decode(json);
for(var i = 1; i &lt;= real(dialog[? "n"]); i++) {
    var accion = json_decode(dialog[? "dialog-"+string(i)])
    
    var tmp = json_decode(accion[? "texts"]);
    accion[? "texts"] = dim_map_to_list(tmp);
    dialog[? "dialog-"+string(i)] = accion;
}
*/
dialog = dim_json_to_map(json)

var m = 1; 
var accion = -1;

while(not is_undefined( dialog[? "dialog-"+string(m)])) {
    accion = dialog[? "dialog-"+string(m)]; // ??
    if (not is_undefined(accion[? "do"]))
    show_debug_message("Loading actions .. "+accion[? "do"]+" ("+ string(m) +")")
    switch(accion[? "do"]) {
        case "dialog":
            var obj = noone;
            switch(accion[? "pos"]) {
                case "derarr": obj = dem_crear_der(id) break;
                case "derabj": obj = dem_crear_der_down(id) break;
                case "izqarr": obj = dem_crear_izq_up(id) break;
                case "izqabj": obj = dem_crear_izq(id) break;
            }
            obj.texts = accion[? "texts"]; // ??
            obj.ide = real(accion[? "ide"]);
        break;
        case "wait":
            dem_set_waiter(id)
        break;
        case "d-wait":
            dem_dialog_waitx(id, accion[? "toIde"])
        break;
        case "end":
            dem_end_dialogs(id)
        break;
        case "text":
            var obj = dem_text_setx(id,accion[? "toIde"]);
            obj.texts = accion[? "texts"];
        break;
        case "dialog-quit":
            dem_quitar_dialogx(id, accion[? "toIde"])
        break;
        case "scr-x":
            dem_script_exex(id, accion[? "script"])
        break;
    }
    m++;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="116">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GUARDAR
event_user(0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="115">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GUARDAR COMO
fname = ""
event_user(0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="114">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0,0,objDialogoTester)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room=roomGameEditor

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
