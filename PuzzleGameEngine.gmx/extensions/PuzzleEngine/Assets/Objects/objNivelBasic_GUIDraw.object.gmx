<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprPCIcon</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.roomtype = "mapa"
global.nivel = 0
display_set_gui_maximise();
//global.filemap = "nivel1\Mapa Ariel.ppmap"
background = -1;
level = sprPocahontasNivel;
global.backs = -1
gui_w = display_get_gui_width();
gui_h = display_get_gui_height();
// Portrait Variables
xx = 0;
bgsxp = 1;//gui_w/sprite_get_width(background); // Scala X del Background
bgsyp = 1;//gui_h/sprite_get_height(background); // Scala Y del Background
//event_user(0) // recalculo de bgsxp y bgxyp
// Variable de Rotation
bgr = 0;
objetos = -1;
nivel = 0
// efecto de nivel nuevo
nc = 0.1;
nc_c = 0
nc_max = 1
nc_fps = 5
nc_b = false
event_user(1)

if (variable_global_exists("dialogando") == false) {
    global.dialogando = false;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (nc_b == true) {
    nc_c ++;
    if (nc_c &gt;= nc_fps) {
        nc_c = 0;
        nc += 0.1;
        if (nc &gt;= nc_max) {nc_b = false;}
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// LOAD MAP

// load map user level

nivel = niveles_cual(global.filemap)

if (DEBUK == 1) nivel = 5;

// load map part

var json = filemap_open(global.filemap);

var mainmap = json_decode(json);

if (mainmap == -1) {
    show_message("A ERROR OCURRED, PLEASE REPORT THIS.")
    room = roomFirstScreen;
    exit;
}
if (string_count("\",mainmap[? "background"]) == 0)
background = asset_get_index(mainmap[? "background"]);
else background = sprite_add(mainmap[? "background"],1,0,0,0,0);

global.backs = asset_get_index(mainmap[? "back_script"])
event_user(0)
objetos = ds_list_create()

var n = real(mainmap[? "n"]);

for(var i = 0; i &lt; n; i++) {
    ds_list_add(objetos, json_decode(mainmap[? "object-"+string(i)]))
}

for(var i = 0; i &lt; ds_list_size(objetos); i++) {

    var map = objetos[| i];
    map[? "x"] = real(map[? "x"]);
    map[? "y"] = real(map[? "y"]);
    map[? "rot"] = real(map[? "rot"])
    if (string_count("\", map[? "img"]) == 0){
        map[? "img"] = asset_get_index(map[? "img"]);
    } else {
        map[? "imgx"] = map[? "img"]
        map[? "img"] = sprite_add(map[? "img"],1,0,0,0,0)
    }
    map[? "asset"] = asset_get_index(map[? "asset"])
    
    map[? "type"] = asset_get_index(map[? "type"])
    map[? "nivel"] = real(map[? "nivel"])
    if (map[? "nivel"] == nivel) nc_b = true;
    if (map[? "obj"] == "animado") {
        map[? "img_spd"] = real(map[? "img_spd"])
        map[? "img_spd_max"] = sprite_get_number(map[? "asset"])-1; 
    }
    map[? "img_counter"] = 0;  
    map[? "vk"] = -1;
    map[? "ord"] = numero_a_letra(i);
    objetos[| i] = map;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>bgsxp = gui_w/sprite_get_width(background);
bgsyp = gui_h/sprite_get_height(background);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>for(var i = 0; i &lt; ds_list_size(objetos); i++) {
    var map = objetos[| i];
    if (map[? "img"] != "Noone") {
        sprite_delete(map[? "img"])
    }
    ds_map_destroy(map)
}
ds_list_destroy(objetos)

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.roomtype = "mapa"
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="74">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(background,0,0,xx,bgsxp,bgsyp,bgr,c_white,1)

switch(display_get_orientation()) {

    case display_portrait:
    case display_portrait_flipped:
        if (bgr != 0) {
            xx = 0;
            bgr = 0;
        }

    break;
    
    case display_landscape:
    case display_landscape_flipped:
        if (bgr != 90) {
            bgr = 90;
            xx = gui_w;
        }
        
    break;
}

for(var i = 0; i &lt; ds_list_size(objetos); i++) {
    var map = objetos[| i];
    if (map[? "nivel"] &gt; nivel) continue;
    if (map[? "nivel"] == nivel) 
    draw_sprite_ext(map[? "asset"],map[? "img_counter"],gui_w/map[?"x"],gui_h/map[? "y"],nc,nc,map[? "rot"],c_white,1)
    else
    draw_sprite_ext(map[? "asset"],map[? "img_counter"],gui_w/map[?"x"],gui_h/map[? "y"],1,1,map[? "rot"],c_white,1)
    if (map[? "obj"] == "animado") {
        if (map[? "img_counter"] &gt;= map[? "img_spd_max"]) map[? "img_counter"] = 0;
        map[? "img_counter"] += map[? "img_spd"];
    }
    if(map[? "vk"] == -1) and (map[?"img"] != -1) {
        map[? "vk"] = virtual_key_add(gui_w/map[?"x"],gui_h/map[? "y"],sprite_get_width(map[? "asset"]),sprite_get_height(map[? "asset"]),ord(map[?"ord"]))
    }
     
}

if (global.dialogando == false)
for(var i = 0; i &lt; ds_list_size(objetos); i++) {
    var map = objetos[| i];
    if (keyboard_check_pressed(ord(map[? "ord"])) == true) {
        if (stage_valido(map[? "type"]) == false) continue;
        global.imagen = map[? "imgx"];
        show_debug_message(global.imagen)
        global.nivel = map[? "nivel"];
        room = map[? "type"];
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.backs != -1) {
    script_execute(global.backs)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
